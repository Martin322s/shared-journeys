<main>
    <div class="container-profile">
        <div class="profile-card">
            <div class="profile-header">
                <div class="profile-info">
                    <img src="{{user.profilePicture}}" alt="Профилна снимка" class="profile-image">
                    <h1 class="profile-name">{{user.firstName}} {{user.lastName}}</h1>
                    <div class="profile-buttons">
                        {{#if follow}}
                        <a href="/users/follow-user/{{followedUser}}/{{followingUser}}" class="btn-follow">Последвай</a>
                        {{else}}
                        {{#if notCurrentUser}}
                        <div class="already-following">
                            <i class="bi bi-check-circle-fill"></i>Последван
                        </div>
                        {{/if}}
                        {{/if}}
                        {{#if message}}
                        <a href="#" class="btn-message">Съобщение</a>
                        {{/if}}
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-number">{{user.tripsSubscribedHistory.length}}</div>
                        <div class="stat-label">Записани пътувания</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{user.tripsSharedHistory.length}}</div>
                        <div class="stat-label">Споделени обяви</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{user.followers.length}}</div>
                        <div class="stat-label">Последователи</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{user.following.length}}</div>
                        <div class="stat-label">Последвани</div>
                    </div>
                </div>
            </div>

            <div class="profile-details">
                <div class="detail-item">
                    <span class="detail-label">Имейл:</span>
                    <span class="detail-value">{{user.email}}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Телефон:</span>
                    <span class="detail-value">{{user.phone}}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Регистриран от:</span>
                    <span class="detail-value">{{user.createdAt}}</span>
                </div>
            </div>
        </div>

        <div class="rides-section">
            <div class="rides-column">
                <div class="rides-header">Споделени обяви</div>
                {{#each createdRoads}}
                <div class="ride-card">
                    <div class="ride-date">{{date}}</div>
                    <div class="ride-title">{{startPoint}} → {{endPoint}}</div>
                    <div class="ride-details">
                        Заминаване: {{time}} ч.<br>
                        Свободни места: {{seats}}<br>
                        Цена: {{price}} лв.
                    </div>
                </div>
                {{/each}}
            </div>

            <div class="rides-column">
                <div class="rides-header">Записани пътувания</div>
                {{#each driver.tripsSubscribedHistory}}
                <div class="ride-card">
                    <div class="ride-date">{{date}}</div>
                    <div class="ride-title">{{startPoint}} → {{endPoint}}</div>
                    <div class="ride-details">
                        Заминаване: {{time}} ч.<br>
                        Шофьор: {{_ownerId.firstName}} {{_ownerId.lastName}}<br>
                        Цена: {{price}} лв.
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
</main>